{"version":3,"file":"js/846.d983a05d.js","mappings":"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","sources":["webpack://frontend/./src/views/self/security.vue","webpack://frontend/./src/views/self/security.vue?5227"],"sourcesContent":["<template>\r\n  <n-grid cols=\"12\" item-responsive responsive=\"self\">\r\n    <!-- 信息修改 -->\r\n    <n-gi span=\"12 700:6 1200:4\">\r\n      <n-card>\r\n        <n-collapse default-expanded-names=\"user_info\" accordion>\r\n          <n-collapse-item title=\"修改信息\" name=\"user_info\">\r\n            <n-form :model=\"u\" :rules=\"rules\">\r\n              <n-form-item-row>\r\n                <n-checkbox v-model:checked=\"a.n\"> 名称 </n-checkbox>\r\n                <n-checkbox v-model:checked=\"a.e\"> 邮箱 </n-checkbox>\r\n                <n-checkbox v-model:checked=\"a.p\"> 密码 </n-checkbox>\r\n              </n-form-item-row>\r\n              <n-collapse-transition :show=\"a.n\">\r\n                <n-form-item-row label=\"新账户名称\" path=\"name\">\r\n                  <n-input v-model:value=\"u.name\" maxlength=\"20\" />\r\n                </n-form-item-row>\r\n              </n-collapse-transition>\r\n              <n-collapse-transition :show=\"a.e\">\r\n                <n-form-item-row label=\"新对接邮箱\" path=\"email\">\r\n                  <n-input v-model:value=\"u.email\" type=\"email\" maxlength=\"64\" />\r\n                </n-form-item-row>\r\n              </n-collapse-transition>\r\n              <n-collapse-transition :show=\"a.p\">\r\n                <n-form-item-row label=\"输入新密码\" path=\"password\">\r\n                  <n-input v-model:value=\"u.password\" type=\"password\" show-password-on=\"click\" maxlength=\"24\"\r\n                    :input-props=\"{ autocomplete:false }\" />\r\n                </n-form-item-row>\r\n              </n-collapse-transition>\r\n              <n-collapse-transition :show=\"a.p || a.e\">\r\n                <n-form-item-row label=\"输入验证码\" path=\"token\" maxlength=\"8\">\r\n                  <n-input-group>\r\n                    <n-input v-model:value=\"u.token\" />\r\n                    <n-button @click=\"get_token\"> 获取 </n-button>\r\n                  </n-input-group>\r\n                </n-form-item-row>\r\n              </n-collapse-transition>\r\n              <n-button block type=\"primary\" @click=\"change\"> 提交 </n-button>\r\n            </n-form>\r\n          </n-collapse-item>\r\n\r\n          <n-collapse-item title=\"注销账号\">\r\n            <n-space vertical>\r\n              <n-steps vertical :current=\"current\" :status=\"'process'\">\r\n                <n-step title=\"确认文件\"></n-step>\r\n                <n-step title=\"提交申请\"></n-step>\r\n                <n-step title=\"注销成功\"></n-step>\r\n              </n-steps>\r\n              <n-divider />\r\n\r\n              <n-space vertical v-if=\"current == 1\">\r\n                <n-collapse accordion>\r\n                  <n-collapse-item title=\"账户相关\"></n-collapse-item>\r\n                  <n-collapse-item title=\"数据处理\"></n-collapse-item>\r\n                </n-collapse>\r\n                <n-divider />\r\n                <n-button block @click=\"current = 2\">\r\n                  已知悉并同意条款\r\n                </n-button>\r\n              </n-space>\r\n\r\n              <n-space vertical v-if=\"current == 2\">\r\n                <n-alert title=\"无法撤销\" type=\"warning\">\r\n                  请在阅读注销确认事项后注销账号\r\n                </n-alert>\r\n                <n-button block @click=\"current = 1\"> 返回上条 </n-button>\r\n                <n-button block type=\"error\" @click=\"cancel_account\">\r\n                  确认注销\r\n                </n-button>\r\n              </n-space>\r\n\r\n              <n-space vertical v-if=\"current == 3\">\r\n                <n-result status=\"success\" title=\"成功\">\r\n                  <template #footer>\r\n                    已完成注销操作，将自动退出账号。\r\n                    <n-countdown :duration=\"3000\" :active=\"current == 3\" />\r\n                  </template>\r\n\r\n                </n-result>\r\n              </n-space>\r\n            </n-space>\r\n          </n-collapse-item>\r\n        </n-collapse>\r\n      </n-card>\r\n    </n-gi>\r\n    <!-- 安全信息展示 -->\r\n    <n-gi span=\"6 700:3 1200:4\">\r\n      <n-timeline>\r\n        <n-timeline-item type=\"success\" title=\"邮箱号绑定\" content=\"已绑定\" />\r\n        <n-timeline-item type=\"error\" title=\"手机号绑定\" content=\"等待完善\" />\r\n        <n-timeline-item type=\"error\" title=\"身份验证\" content=\"等待完善\" />\r\n        <n-timeline-item type=\"info\" title=\"信息完善\" content=\"等待完善\" line-type=\"dashed\" />\r\n        <n-timeline-item content=\"等待完善\">\r\n          <template #icon>\r\n            <n-icon></n-icon>\r\n          </template>\r\n        </n-timeline-item>\r\n      </n-timeline>\r\n    </n-gi>\r\n    <!-- 百分比效果 -->\r\n    <n-gi span=\"6 700:3 1200:4\">\r\n      <n-space justify=\"center\">\r\n        <n-progress type=\"dashboard\" gap-position=\"bottom\" :percentage=\"25\">\r\n          <n-statistic tabular-nums>\r\n            <n-number-animation show-separator :from=\"0\" :to=\"25\" />\r\n          </n-statistic>\r\n          <n-text>%</n-text>\r\n        </n-progress>\r\n      </n-space>\r\n      <n-h2 prefix=\"bar\" type=\"error\">请完善信息</n-h2>\r\n      <n-button block @click=\"$router.push({name:'self'})\">快速前往</n-button>\r\n    </n-gi>\r\n    <!-- 日历 -->\r\n    <n-gi span=\"0 700:12\">\r\n      <n-calendar #=\"{ year, month, date }\">\r\n        {{ year }}-{{ month }}-{{ date }}\r\n      </n-calendar>\r\n    </n-gi>\r\n  </n-grid>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      current: 1,\r\n      code: null,\r\n      a: { n: false, e: false, p: false },\r\n      u: {\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        token: \"\",\r\n      },\r\n      rules: {\r\n        name: {\r\n          required: true,\r\n          message: \"1-20位长度\",\r\n          trigger: [\"input\", \"blur\"],\r\n          validator(_, val) {\r\n            return val.length > 0;\r\n          },\r\n        },\r\n        email: {\r\n          required: true,\r\n          message: \"邮箱格式不匹配\",\r\n          trigger: [\"input\", \"blur\"],\r\n          validator(_, val) {\r\n            return /^\\w{2,32}\\@\\w+\\.\\w+$/.test(val);\r\n          },\r\n        },\r\n        password: {\r\n          required: true,\r\n          message: \"最少6位\",\r\n          trigger: [\"input\", \"blur\"],\r\n          validator(_, val) {\r\n            return val.length > 5;\r\n          },\r\n        },\r\n        token: {\r\n          required: true,\r\n          message: \"8位长度\",\r\n          trigger: [\"input\", \"blur\"],\r\n          validator(_, val) {\r\n            return val.length == 8;\r\n          },\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    cancel_account() {\r\n      axios.delete(\"/users/\").then(() => {\r\n        this.current = 3;\r\n        // 清空用户数据\r\n        sessionStorage.clear();\r\n        localStorage.clear();\r\n        this.$store.commit(\"clear_all\")\r\n        this.$router.push(\"/verify\");\r\n      });\r\n    },\r\n    get_token() {\r\n      axios.post(\"/users/token\").then((req) => {\r\n        this.code = req.data.code;\r\n      });\r\n    },\r\n    change() {\r\n      if (!this.a.n) this.u.name = null;\r\n      if (!this.a.e) this.u.email = null;\r\n      if (!this.a.p) this.u.password = null;\r\n      if ((this.a.e || this.a.p) && this.u.token.length == 8) {\r\n        if (this.a.n && !this.u.name.length) return;\r\n        if (this.a.p && !/^\\w{6,24}$/.test(this.u.password)) return;\r\n        if (this.a.e && !/^\\w{2,32}\\@\\w+\\.\\w+$/.test(this.u.email)) return;\r\n      } else if (this.a.n && this.u.name.length) {\r\n      } else return;\r\n      let name = this.u.name;\r\n      axios\r\n        .put(\"/users/?token=\" + this.u.token, this.u, {\r\n          headers: { code: this.code },\r\n        })\r\n        .then(() => {\r\n          if (name) this.$store.state.user.name = name;\r\n        });\r\n      this.u.name = this.u.email = this.u.password = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.n-timeline {\r\n  margin: 15px;\r\n}\r\n\r\n.n-progress,\r\n.n-calendar {\r\n  margin-top: 15px;\r\n}\r\n</style>","import { render } from \"./security.vue?vue&type=template&id=67191c8c&scoped=true\"\nimport script from \"./security.vue?vue&type=script&lang=js\"\nexport * from \"./security.vue?vue&type=script&lang=js\"\n\nimport \"./security.vue?vue&type=style&index=0&id=67191c8c&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Approach\\\\WorkSpace\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67191c8c\"]])\n\nexport default __exports__"],"names":["cols","responsive","span","accordion","title","name","model","u","rules","checked","a","n","e","p","show","label","path","value","maxlength","email","type","password","autocomplete","token","get_token","block","change","vertical","current","status","cancel_account","footer","duration","active","content","icon","justify","percentage","from","to","prefix","$router","push","year","month","date","data","code","required","message","trigger","validator","_","val","length","test","methods","then","this","sessionStorage","clear","localStorage","$store","commit","req","headers","state","user","__exports__","render"],"sourceRoot":""}