"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[846],{846:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(6252),u=a(3577);const l=(0,n.Uk)(" 名称 "),r=(0,n.Uk)(" 邮箱 "),s=(0,n.Uk)(" 密码 "),o=(0,n.Uk)(" 获取 "),i=(0,n.Uk)(" 提交 "),c=(0,n.Uk)(" 已知悉并同意条款 "),d=(0,n.Uk)(" 请在阅读注销确认事项后注销账号 "),m=(0,n.Uk)(" 返回上条 "),p=(0,n.Uk)(" 确认注销 "),w=(0,n.Uk)(" 已完成注销操作，将自动退出账号。 "),h=(0,n.Uk)("%"),f=(0,n.Uk)("请完善信息"),k=(0,n.Uk)("快速前往");function W(e,t,a,W,_,g){const v=(0,n.up)("n-checkbox"),b=(0,n.up)("n-form-item-row"),U=(0,n.up)("n-input"),y=(0,n.up)("n-collapse-transition"),C=(0,n.up)("n-button"),x=(0,n.up)("n-input-group"),q=(0,n.up)("n-form"),$=(0,n.up)("n-collapse-item"),j=(0,n.up)("n-step"),z=(0,n.up)("n-steps"),S=(0,n.up)("n-divider"),T=(0,n.up)("n-collapse"),I=(0,n.up)("n-space"),Z=(0,n.up)("n-alert"),A=(0,n.up)("n-countdown"),B=(0,n.up)("n-result"),D=(0,n.up)("n-card"),E=(0,n.up)("n-gi"),F=(0,n.up)("n-timeline-item"),G=(0,n.up)("n-icon"),H=(0,n.up)("n-timeline"),J=(0,n.up)("n-number-animation"),K=(0,n.up)("n-statistic"),L=(0,n.up)("n-text"),M=(0,n.up)("n-progress"),N=(0,n.up)("n-h2"),O=(0,n.up)("n-calendar"),P=(0,n.up)("n-grid");return(0,n.wg)(),(0,n.j4)(P,{cols:"12","item-responsive":"",responsive:"self"},{default:(0,n.w5)((()=>[(0,n.Wm)(E,{span:"12 700:6 1200:4"},{default:(0,n.w5)((()=>[(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,{"default-expanded-names":"user_info",accordion:""},{default:(0,n.w5)((()=>[(0,n.Wm)($,{title:"修改信息",name:"user_info"},{default:(0,n.w5)((()=>[(0,n.Wm)(q,{model:_.u,rules:_.rules},{default:(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{checked:_.a.n,"onUpdate:checked":t[0]||(t[0]=e=>_.a.n=e)},{default:(0,n.w5)((()=>[l])),_:1},8,["checked"]),(0,n.Wm)(v,{checked:_.a.e,"onUpdate:checked":t[1]||(t[1]=e=>_.a.e=e)},{default:(0,n.w5)((()=>[r])),_:1},8,["checked"]),(0,n.Wm)(v,{checked:_.a.p,"onUpdate:checked":t[2]||(t[2]=e=>_.a.p=e)},{default:(0,n.w5)((()=>[s])),_:1},8,["checked"])])),_:1}),(0,n.Wm)(y,{show:_.a.n},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"新账户名称",path:"name"},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{value:_.u.name,"onUpdate:value":t[3]||(t[3]=e=>_.u.name=e),maxlength:"20"},null,8,["value"])])),_:1})])),_:1},8,["show"]),(0,n.Wm)(y,{show:_.a.e},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"新对接邮箱",path:"email"},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{value:_.u.email,"onUpdate:value":t[4]||(t[4]=e=>_.u.email=e),type:"email",maxlength:"64"},null,8,["value"])])),_:1})])),_:1},8,["show"]),(0,n.Wm)(y,{show:_.a.p},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"输入新密码",path:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{value:_.u.password,"onUpdate:value":t[5]||(t[5]=e=>_.u.password=e),type:"password","show-password-on":"click",maxlength:"24","input-props":{autocomplete:!1}},null,8,["value"])])),_:1})])),_:1},8,["show"]),(0,n.Wm)(y,{show:_.a.p||_.a.e},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"输入验证码",path:"token",maxlength:"8"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(U,{value:_.u.token,"onUpdate:value":t[6]||(t[6]=e=>_.u.token=e)},null,8,["value"]),(0,n.Wm)(C,{onClick:g.get_token},{default:(0,n.w5)((()=>[o])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["show"]),(0,n.Wm)(C,{block:"",type:"primary",onClick:g.change},{default:(0,n.w5)((()=>[i])),_:1},8,["onClick"])])),_:1},8,["model","rules"])])),_:1}),(0,n.Wm)($,{title:"注销账号"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{vertical:""},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{vertical:"",current:_.current,status:"process"},{default:(0,n.w5)((()=>[(0,n.Wm)(j,{title:"确认文件"}),(0,n.Wm)(j,{title:"提交申请"}),(0,n.Wm)(j,{title:"注销成功"})])),_:1},8,["current"]),(0,n.Wm)(S),1==_.current?((0,n.wg)(),(0,n.j4)(I,{key:0,vertical:""},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{accordion:""},{default:(0,n.w5)((()=>[(0,n.Wm)($,{title:"账户相关"}),(0,n.Wm)($,{title:"数据处理"})])),_:1}),(0,n.Wm)(S),(0,n.Wm)(C,{block:"",onClick:t[7]||(t[7]=e=>_.current=2)},{default:(0,n.w5)((()=>[c])),_:1})])),_:1})):(0,n.kq)("",!0),2==_.current?((0,n.wg)(),(0,n.j4)(I,{key:1,vertical:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{title:"无法撤销",type:"warning"},{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(C,{block:"",onClick:t[8]||(t[8]=e=>_.current=1)},{default:(0,n.w5)((()=>[m])),_:1}),(0,n.Wm)(C,{block:"",type:"error",onClick:g.cancel_account},{default:(0,n.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})):(0,n.kq)("",!0),3==_.current?((0,n.wg)(),(0,n.j4)(I,{key:2,vertical:""},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{status:"success",title:"成功"},{footer:(0,n.w5)((()=>[w,(0,n.Wm)(A,{duration:3e3,active:3==_.current},null,8,["active"])])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(E,{span:"6 700:3 1200:4"},{default:(0,n.w5)((()=>[(0,n.Wm)(H,null,{default:(0,n.w5)((()=>[(0,n.Wm)(F,{type:"success",title:"邮箱号绑定",content:"已绑定"}),(0,n.Wm)(F,{type:"error",title:"手机号绑定",content:"等待完善"}),(0,n.Wm)(F,{type:"error",title:"身份验证",content:"等待完善"}),(0,n.Wm)(F,{type:"info",title:"信息完善",content:"等待完善","line-type":"dashed"}),(0,n.Wm)(F,{content:"等待完善"},{icon:(0,n.w5)((()=>[(0,n.Wm)(G)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(E,{span:"6 700:3 1200:4"},{default:(0,n.w5)((()=>[(0,n.Wm)(I,{justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(M,{type:"dashboard","gap-position":"bottom",percentage:25},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{"tabular-nums":""},{default:(0,n.w5)((()=>[(0,n.Wm)(J,{"show-separator":"",from:0,to:25})])),_:1}),(0,n.Wm)(L,null,{default:(0,n.w5)((()=>[h])),_:1})])),_:1})])),_:1}),(0,n.Wm)(N,{prefix:"bar",type:"error"},{default:(0,n.w5)((()=>[f])),_:1}),(0,n.Wm)(C,{block:"",onClick:t[9]||(t[9]=t=>e.$router.push({name:"self"}))},{default:(0,n.w5)((()=>[k])),_:1})])),_:1}),(0,n.Wm)(E,{span:"0 700:12"},{default:(0,n.w5)((()=>[(0,n.Wm)(O,null,{default:(0,n.w5)((({year:e,month:t,date:a})=>[(0,n.Uk)((0,u.zw)(e)+"-"+(0,u.zw)(t)+"-"+(0,u.zw)(a),1)])),_:1})])),_:1})])),_:1})}var _=a(9669),g=a.n(_);const v={data(){return{current:1,code:null,a:{n:!1,e:!1,p:!1},u:{name:"",email:"",password:"",token:""},rules:{name:{required:!0,message:"1-20位长度",trigger:["input","blur"],validator(e,t){return t.length>0}},email:{required:!0,message:"邮箱格式不匹配",trigger:["input","blur"],validator(e,t){return/^\w{2,32}\@\w+\.\w+$/.test(t)}},password:{required:!0,message:"最少6位",trigger:["input","blur"],validator(e,t){return t.length>5}},token:{required:!0,message:"8位长度",trigger:["input","blur"],validator(e,t){return 8==t.length}}}}},methods:{cancel_account(){g()["delete"]("/users/").then((()=>{this.current=3,sessionStorage.clear(),localStorage.clear(),this.$store.commit("clear_all"),this.$router.push("/verify")}))},get_token(){g().post("/users/token").then((e=>{this.code=e.data.code}))},change(){if(this.a.n||(this.u.name=null),this.a.e||(this.u.email=null),this.a.p||(this.u.password=null),(this.a.e||this.a.p)&&8==this.u.token.length){if(this.a.n&&!this.u.name.length)return;if(this.a.p&&!/^\w{6,24}$/.test(this.u.password))return;if(this.a.e&&!/^\w{2,32}\@\w+\.\w+$/.test(this.u.email))return}else if(!this.a.n||!this.u.name.length)return;let e=this.u.name;g().put("/users/?token="+this.u.token,this.u,{headers:{code:this.code}}).then((()=>{e&&(this.$store.state.user.name=e)})),this.u.name=this.u.email=this.u.password=""}}};var b=a(3744);const U=(0,b.Z)(v,[["render",W],["__scopeId","data-v-67191c8c"]]),y=U}}]);
//# sourceMappingURL=846.d983a05d.js.map