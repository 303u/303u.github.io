"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[870],{1870:(t,a,e)=>{e.r(a),e.d(a,{default:()=>b});var n=e(6252),l=e(9963);const u=(0,n.Uk)(" 文章编辑 "),r=["innerHTML"],o=["innerHTML"],s=(0,n.Uk)("提交"),d=(0,n.Uk)(" 返回上级 "),i=(0,n.Uk)(" 返回主页 "),m=(0,n.Uk)(" 查看投稿 ");function c(t,a,e,c,w,h){const p=(0,n.up)("LogoMarkdown"),g=(0,n.up)("n-icon"),k=(0,n.up)("n-button"),f=(0,n.up)("n-input"),W=(0,n.up)("n-form-item-row"),_=(0,n.up)("n-select"),v=(0,n.up)("n-gi"),b=(0,n.up)("n-card"),C=(0,n.up)("n-grid"),y=(0,n.up)("n-form"),$=(0,n.up)("n-back-top"),x=(0,n.up)("n-button-group"),U=(0,n.up)("n-space"),M=(0,n.up)("n-result"),L=(0,n.up)("n-time"),T=(0,n.up)("n-divider");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.wy)((0,n.Wm)(b,null,{header:(0,n.w5)((()=>[u])),"header-extra":(0,n.w5)((()=>[(0,n.Wm)(k,{circle:"",onClick:a[0]||(a[0]=t=>w.show_markdown=!w.show_markdown)},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:1})])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(y,{model:w.data,rules:w.rules},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{label:"标题"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{clearable:"","show-count":"",maxlength:"64",value:w.data.title,"onUpdate:value":a[1]||(a[1]=t=>w.data.title=t)},null,8,["value"])])),_:1}),(0,n.Wm)(W,{label:"标签",path:"tag"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{value:w.data.tag,"onUpdate:value":a[2]||(a[2]=t=>w.data.tag=t),filterable:"",multiple:"",tag:""},null,8,["value"])])),_:1}),(0,n.Wm)(W,{label:"介绍"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{clearable:"","show-count":"",maxlength:"200",value:w.data.description,"onUpdate:value":a[3]||(a[3]=t=>w.data.description=t)},null,8,["value"])])),_:1}),(0,n.wy)((0,n.Wm)(W,{label:"内容"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{cols:"2","item-responsive":"",responsive:"self"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{span:"2 700:1"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{clearable:"","show-count":"",type:"textarea",maxlength:"6500",value:w.data.content,"onUpdate:value":a[4]||(a[4]=t=>w.data.content=t),autosize:{minRows:10}},null,8,["value"])])),_:1}),(0,n.Wm)(v,{span:"0 700:1"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{class:"markdown",bordered:!1},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:w.marked(w.data.content)},null,8,r)])),_:1})])),_:1})])),_:1})])),_:1},512),[[l.F8,!w.show_markdown]]),(0,n.wy)((0,n.Wm)(b,{class:"markdown",bordered:!1},{default:(0,n.w5)((()=>[(0,n._)("div",{innerHTML:w.marked(w.data.content)},null,8,o)])),_:1},512),[[l.F8,w.show_markdown]]),(0,n.Wm)(k,{type:"primary",onClick:h.post,block:""},{default:(0,n.w5)((()=>[s])),_:1},8,["onClick"])])),_:1},8,["model","rules"]),(0,n.Wm)($,{right:50})])),_:1},512),[[l.F8,0==w.suc]]),(0,n.wy)((0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(M,{status:"success",title:"已成功提交"},{footer:(0,n.w5)((()=>[(0,n.Wm)(U,{justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,{secondary:"",onClick:a[5]||(a[5]=a=>t.$router.back())},{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(k,{secondary:"",onClick:a[6]||(a[6]=a=>t.$router.push("/"))},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(k,{secondary:"",onClick:a[7]||(a[7]=a=>t.$router.push({name:"self"}))},{default:(0,n.w5)((()=>[m])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(L,{time:(new Date).getTime()},null,8,["time"])])),_:1})])),_:1},512),[[l.F8,0!=w.suc]])],64)}var w=e(9669),h=e.n(w),p=e(7441);const g={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},k=(0,n.Wm)("path",{d:"M475 64H37C16.58 64 0 81.38 0 102.77v306.42C0 430.59 16.58 448 37 448h438c20.38 0 37-17.41 37-38.81V102.77C512 81.38 495.42 64 475 64zM288 368h-64V256l-48 64l-48-64v112H64V144h64l48 80l48-80h64zm96 0l-80-112h48.05L352 144h64v112h48z",fill:"currentColor"},null,-1),f=(0,n.aZ)({name:"LogoMarkdown",render:function(t,a){return(0,n.wg)(),(0,n.j4)("svg",g,[k])}}),W={data(){let t={title:"",content:"",description:"",tag:[]};return this.$route.params.id&&h().get("/items/"+this.$route.params.id).then((t=>{t.data.author!=this.$store.state.user.id?this.$router.back():this.data={...t.data,tag:t.data.tag.split(",")}})).catch((()=>{this.$router.back()})),{suc:0,data:t,marked:p.TU,show_markdown:!1,rules:{tag:{message:"字数总和需要小于128",trigger:["input","blur"],validator(){return t.tag.join(",").length<=128}}}}},methods:{post(){let t=this.data.tag.join(",");0<this.data.title.length&&t.length<=128&&0<this.data.content.length&&(this.data.description||(this.data.description=this.data.content.replace(/[`#$()<>*-|]/g,"").substring(0,200)),this.$route.params.id?h().put("/items/"+this.$route.params.id,{...this.data,tag:t}).then((()=>this.suc=1)):h().post("/items/",{...this.data,tag:t}).then((()=>this.suc=1)))}},components:{LogoMarkdown:f}};var _=e(3744);const v=(0,_.Z)(W,[["render",c]]),b=v}}]);
//# sourceMappingURL=870.0b3b9354.js.map